# TQQQ/현금 전환 전략 요약

- **주요 기능**: 백테스트(성과 리포트), 튜닝(파라미터 탐색), 추천(오늘 종가 기준 신호) 세 가지를 제공하며, 세 모듈이 동일한 시그널·기간·워밍업 로직을 공유합니다.
- **전략 핵심**: 시그널 티커 QQQ의 추세(단·장기 이동평균)와 드로다운 컷오프를 사용해 공격/방어를 전환합니다. 드로다운이 기준치 이하면 방어(현금 100%), 아니면 추세가 상승일 때 공격(TQQQ), 그렇지 않으면 방어.
- **매매 가정**: 신호가 발생한 다음 거래일 시초가로 전액 전환하며, `settings.json`의 `slippage`(%)를 매수·매도 모두에 적용해 보수적으로 체결가를 추정합니다. 수량은 TQQQ 정수 주 단위로만 매매하며, 단주 불가분 잔액은 CASH로 남습니다.
- **기간/워밍업**: `settings.json`의 `months_range`를 기준으로 구간을 잡고, 이동평균 계산을 위해 충분한 워밍업 영업일(장기선 2배+여유)을 자동 확보한 뒤 공통 가용 구간을 사용합니다. 데이터 가용성이 부족하면 실제 테스트 기간이 줄어들며, 로그에 “months_range → 실제 n개월”로 표시됩니다.
- **방어 자산**: 방어는 `defense_ticker`로 지정하며, 기본은 SGOV, 설정에 따라 CASH도 가능. 방어 티커가 ETF일 때는 해당 자산을 매수하며, CASH는 잔여 현금 보유를 의미합니다.
- **추천 흐름**: 장 마감 후 추천을 생성하고, 다음 거래일 시초가 체결을 가정하면 백테스트 가정과 가장 근접한 실제 운용 흐름이 됩니다(실제 체결은 수수료·세금·슬리피지·휴일 등에 따라 차이가 날 수 있음).
- **출력 특징**: 일자별 성과, 구간별 보유 요약, 주별/월별 성과, 벤치마크 비교(데이터 부족 시 안내)를 포함한 리포트를 로그 파일로 남깁니다. 튜닝은 상위 조합을 정렬해 기록하며, 최적 조합으로 `settings.json`을 갱신하고 `backtested_date`를 남깁니다.
