# Nasdaq Leverage Switching Strategy

## 1. 전략 개요 (Strategy)
나스닥 100(QQQ)의 변동성에 대응하여 **TQQQ(공격)**와 **방어 자산(GDX, GLDM 등)**을 동적으로 교체하는 알고리즘 트레이딩 전략입니다.
**이중 임계값(Dual Threshold)** 시스템을 적용하여 횡보장에서의 잦은 손실(Whipsaw)을 최소화하고 추세를 추종합니다.

### 핵심 로직: 2-Tier Hysteresis
잦은 매매를 방지하기 위해 매수와 매도 기준을 분리했습니다.
- **매도 (Sell)**: 하락폭이 설정된 임계값(예: -0.4%)보다 커지면 방어 자산으로 대피.
- **매수 (Buy)**: 하락폭이 설정된 임계값(예: -0.3%)보다 회복되면 공격 자산으로 복귀.
- **유지 (Hold)**: 그 사이 구간에서는 현재 포지션을 유지.

## 2. 주요 성과 (Performance Example)
*최근 백테스트 기준 (2025-12-20)*

### 🇺🇸 미국 시장 (US)
- **CAGR**: 438.40%
- **MDD**: -14.98%
- **공격 자산**: TQQQ
- **방어 자산**: GDX (반에크 금광 ETF)

### 🇰🇷 한국 시장 (KOR)
- **CAGR**: 82.56%
- **MDD**: -16.18%
- **공격 자산**: 418660 (TIGER 미국나스닥100레버리지)
- **방어 자산**: 161510 (PLUS 고배당주)

*(실제 성과는 시장 상황에 따라 달라질 수 있습니다.)*

## 3. 주요 기능
- **멀티 마켓 지원**: 미국(US) 및 한국(KOR) 시장을 동시 지원합니다.
- **통화 자동 포맷**: 한국 시장은 원화(KRW), 미국 시장은 달러(USD)로 성과를 표시합니다.
- **파라미터 튜닝**: `tune.py`를 실행하여 과거 데이터 기반의 최적 파라미터를 탐색합니다.
- **성과 검증**: `backtest.py`를 실행하여 전략의 과거 성과(CAGR, MDD 등)를 상세히 분석합니다.
- **매매 추천**: `recommend.py`를 실행하여 튜닝된 파라미터로 오늘의 포지션을 결정합니다.
- **Slack 연동**: 추천 결과를 Slack 메시지로 즉시 전송할 수 있습니다.
- **GitHub Actions 자동화**: 매일 정해진 시간에 튜닝 및 추천을 자동 실행하고 결과를 Slack으로 확인합니다.

## 4. 상세 문서
더 자세한 내용은 아래 문서를 참고하세요.
- 📘 [시스템 아키텍처](docs/system_architecture.md): 프로젝트 구조 및 데이터 흐름
- 🧠 [전략 로직 상세](docs/strategy_logic.md): 알고리즘 및 튜닝 프로세스 설명
- 📖 [사용자 가이드](docs/user_guide.md): 실행 방법 및 결과 해석

## 5. 실행
모든 스크립트는 시장 인자(`us` 또는 `kor`)를 받습니다. (기본값: `us`)

```bash
# 1. 튜닝 (최적 파라미터 탐색)
python tune.py kor   # 한국 시장
python tune.py us    # 미국 시장

# 2. 백테스트 (성과 검증)
python backtest.py kor

# 3. 추천 (매매 신호 생성)
python recommend.py kor
python recommend.py us --slack  # 실행 후 Slack 전송
```

## 6. 자동화 (Automation)
이 프로젝트는 GitHub Actions를 통해 시장별로 최적화된 스케줄에 따라 자동으로 실행됩니다.

- **🇺🇸 미국 시장 (`daily_us.yml`)**
    - **오전 06:00 (KST)**: 장 마감 후 튜닝 및 추천
    - **오후 10:00 (KST)**: 장 시작 전 최신 데이터 확인

- **🇰🇷 한국 시장 (`daily_kor.yml`)**
    - **오전 09:00 (KST)**: 장 시작 시점 튜닝 및 추천
    - **오후 03:00 (KST)**: 장 마감 임박 시점 확인

각 워크플로우는 튜닝(Tuning), 추천(Recommendation), Slack 알림(Notification), 그리고 설정 자동 커밋(Auto-Commit)을 수행합니다.

## ⚠️ 면책 조항 (Disclaimer)
이 소프트웨어는 투자를 돕기 위한 보조 도구입니다. **최종적인 투자 결정과 그에 따른 책임은 전적으로 사용자에게 있습니다.** 개발자는 이 프로그램을 사용하여 발생한 금전적 손실에 대해 책임지지 않습니다.
